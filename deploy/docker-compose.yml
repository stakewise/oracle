version: '3.1'

volumes:
  ipfs:
    driver: local

services:
  ipfs:
    image: ipfs/go-ipfs:v0.10.0
    restart: always
    ports:
      - '5001:5001'
    environment:
      - .env
    ulimits:
      nofile:
        soft: 8192
        hard: 8192
    volumes:
      - ipfs:/data/ipfs
      - ./ipfs-entrypoint.sh:/usr/local/bin/start_ipfs

  oracle:
    build:
      context: ./../
      dockerfile: Dockerfile
    restart: always
    env_file:
      - .env
    depends_on:
      - ipfs
